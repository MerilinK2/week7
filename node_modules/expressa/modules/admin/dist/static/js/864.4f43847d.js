"use strict";(self.webpackChunkexpressa_admin=self.webpackChunkexpressa_admin||[]).push([[864,899],{1780:function(e){function t(e,t){var r,n;if("function"==typeof t)void 0!==(n=t(e))&&(e=n);else if(Array.isArray(t))for(r=0;r<t.length;r++)void 0!==(n=t[r](e))&&(e=n);return e}function r(e,t){return"-"===e[0]&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function a(e){return Object(e)===e}function i(e){return 0===Object.keys(e).length}var s=["__proto__","prototype","constructor"],o=function(e){return-1===s.indexOf(e)};function c(e,t){e.indexOf("[")>=0&&(e=e.replace(/\[/g,t).replace(/]/g,""));var r=e.split(t);if(r.filter(o).length!==r.length)throw Error("Refusing to update blacklisted property "+e);return r}var l=Object.prototype.hasOwnProperty;function u(e,t,r,n){if(!(this instanceof u))return new u(e,t,r,n);void 0===t&&(t=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),this.separator=e||".",this.override=t,this.useArray=r,this.useBrackets=n,this.keepArray=!1,this.cleanup=[]}var p=new u(".",!1,!0,!0);function f(e){return function(){return p[e].apply(p,arguments)}}u.prototype._fill=function(e,r,n,s){var o=e.shift();if(e.length>0){if(r[o]=r[o]||(this.useArray&&function(e){return/^\d+$/.test(e)}(e[0])?[]:{}),!a(r[o])){if(!this.override){if(!a(n)||!i(n))throw new Error("Trying to redefine `"+o+"` which is a "+typeof r[o]);return}r[o]={}}this._fill(e,r[o],n,s)}else{if(!this.override&&a(r[o])&&!i(r[o])){if(!a(n)||!i(n))throw new Error("Trying to redefine non-empty obj['"+o+"']");return}r[o]=t(n,s)}},u.prototype.object=function(e,r){var n=this;return Object.keys(e).forEach((function(a){var i=void 0===r?null:r[a],s=c(a,n.separator).join(n.separator);-1!==s.indexOf(n.separator)?(n._fill(s.split(n.separator),e,e[a],i),delete e[a]):e[a]=t(e[a],i)})),e},u.prototype.str=function(e,r,n,a){var i=c(e,this.separator).join(this.separator);return-1!==e.indexOf(this.separator)?this._fill(i.split(this.separator),n,r,a):n[e]=t(r,a),n},u.prototype.pick=function(e,t,n,a){var i,s,o,l,u;for(s=c(e,this.separator),i=0;i<s.length;i++){if(l=r(s[i],t),!t||"object"!=typeof t||!(l in t))return;if(i===s.length-1)return n?(o=t[l],a&&Array.isArray(t)?t.splice(l,1):delete t[l],Array.isArray(t)&&(u=s.slice(0,-1).join("."),-1===this.cleanup.indexOf(u)&&this.cleanup.push(u)),o):t[l];t=t[l]}return n&&Array.isArray(t)&&(t=t.filter((function(e){return void 0!==e}))),t},u.prototype.delete=function(e,t){return this.remove(e,t,!0)},u.prototype.remove=function(e,t,r){var n;if(this.cleanup=[],Array.isArray(e)){for(n=0;n<e.length;n++)this.pick(e[n],t,!0,r);return r||this._cleanup(t),t}return this.pick(e,t,!0,r)},u.prototype._cleanup=function(e){var t,r,n,a;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)t=(t=(a=(n=this.cleanup[r].split(".")).splice(0,-1).join("."))?this.pick(a,e):e)[n[0]].filter((function(e){return void 0!==e})),this.set(this.cleanup[r],t,e);this.cleanup=[]}},u.prototype.del=u.prototype.remove,u.prototype.move=function(e,r,n,a,i){return"function"==typeof a||Array.isArray(a)?this.set(r,t(this.pick(e,n,!0),a),n,i):(i=a,this.set(r,this.pick(e,n,!0),n,i)),n},u.prototype.transfer=function(e,r,n,a,i,s){return"function"==typeof i||Array.isArray(i)?this.set(r,t(this.pick(e,n,!0),i),a,s):(s=i,this.set(r,this.pick(e,n,!0),a,s)),a},u.prototype.copy=function(e,r,n,a,i,s){return"function"==typeof i||Array.isArray(i)?this.set(r,t(JSON.parse(JSON.stringify(this.pick(e,n,!1))),i),a,s):(s=i,this.set(r,this.pick(e,n,!1),a,s)),a},u.prototype.set=function(e,t,r,a){var i,s,o,u;if(void 0===t)return r;for(o=c(e,this.separator),i=0;i<o.length;i++){if(u=o[i],i===o.length-1)if(a&&n(t)&&n(r[u]))for(s in t)l.call(t,s)&&(r[u][s]=t[s]);else if(a&&Array.isArray(r[u])&&Array.isArray(t))for(var p=0;p<t.length;p++)r[o[i]].push(t[p]);else r[u]=t;else l.call(r,u)&&(n(r[u])||Array.isArray(r[u]))||(/^\d+$/.test(o[i+1])?r[u]=[]:r[u]={});r=r[u]}return r},u.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach(function(n){this.set(e[n],this.pick(n,t),r)}.bind(this)),r},u.prototype.dot=function(e,t,r){t=t||{},r=r||[];var s=Array.isArray(e);return Object.keys(e).forEach(function(o){var c=s&&this.useBrackets?"["+o+"]":o;if(a(e[o])&&(n(e[o])&&!i(e[o])||Array.isArray(e[o])&&!this.keepArray&&0!==e[o].length)){if(s&&this.useBrackets){var l=r[r.length-1]||"";return this.dot(e[o],t,r.slice(0,-1).concat(l+c))}return this.dot(e[o],t,r.concat(c))}s&&this.useBrackets?t[r.join(this.separator).concat("["+o+"]")]=e[o]:t[r.concat(c).join(this.separator)]=e[o]}.bind(this)),t},u.pick=f("pick"),u.move=f("move"),u.transfer=f("transfer"),u.transform=f("transform"),u.copy=f("copy"),u.object=f("object"),u.str=f("str"),u.set=f("set"),u.delete=f("delete"),u.del=u.remove=f("remove"),u.dot=f("dot"),["override","overwrite"].forEach((function(e){Object.defineProperty(u,e,{get:function(){return p.override},set:function(e){p.override=!!e}})})),["useArray","keepArray","useBrackets"].forEach((function(e){Object.defineProperty(u,e,{get:function(){return p[e]},set:function(t){p[e]=t}})})),u._process=t,e.exports=u},5962:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(4506),a=r(2284),i=r(4467),s=r(467),o=r(4756),c=r.n(o),l=r(3637),u=r(9906);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=r(1780);d.keepArray=!0;var h={name:"Endpoints",mixins:[l.default],data:function(){return{lastEndpoint:"",apiBaseUrl:u.A.defaults.baseURL,apiSuffix:""}},methods:{update:function(){var e=this;return(0,s.A)(c().mark((function t(){var r,i,s,o,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(;"/"===e.apiSuffix.charAt(0);)e.apiSuffix=e.apiSuffix.substring(1);if(e.apiSuffix){t.next=3;break}return t.abrupt("return");case 3:return(r="".concat(e.apiBaseUrl,"/").concat(e.apiSuffix))!==e.lastEndpoint&&(e.lastEndpoint=r,e.resetTable()),i=f(f({page:e.page,limit:e.pageSize},e.allFilters),{},{query:void 0}),s=e.customParams?"/".concat(e.apiSuffix,"?").concat(e.customParams):"/".concat(e.apiSuffix),t.next=10,(0,u.A)({url:s,params:i,baseURL:e.apiBaseUrl});case 10:!(o=t.sent.data).page&&!o.itemsTotal&&(Array.isArray(o)||(o="object"!==(0,a.A)(o)?[{result:o}]:[o]),o={data:o,itemsTotal:1}),e.count=o.itemsTotal,e.data=e.applyCustomColumnFilter(o.data),e.selectedColumns.length||(l=Array.from(e.data.reduce((function(e,t){var r=d.dot(t);return new Set([].concat((0,n.A)(Object.keys(r)),(0,n.A)(e)))}),[])),e.selectedColumns=l.slice(0,5),e.allPossibleColumns=l);case 16:case"end":return t.stop()}}),t)})))()},applyCustomColumnFilter:function(e){var t=this,r=Object.keys(this.searchFilters);return e.filter((function(e){return r.every((function(r){var n=t.searchFilters[r];if(!n)return!0;var a=d.dot(e)[r].toString();return t.exactSearches[r]?a.trim()===n.trim():a.toLowerCase().includes(n.toLowerCase())}))}))},downloadAllCSV:function(){var e=this;return(0,s.A)(c().mark((function t(){var r,a,i,s,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],a=1;case 2:if(!(e.count>r.length)){t.next=12;break}return i=f(f({},e.allFilters),{},{page:a,limit:500,query:void 0}),s="/".concat(e.apiSuffix,"?").concat(e.customParams),t.next=7,(0,u.A)({url:s,params:i});case 7:o=t.sent.data,r=[].concat((0,n.A)(o.data),(0,n.A)(r)),a+=1,t.next=2;break;case 12:e.downloadCSV(e.applyCustomColumnFilter(r));case 13:case"end":return t.stop()}}),t)})))()}}},y=(0,r(4486).A)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-3"},[r("div",{staticClass:"d-flex align-items-start py-2"},[r("div",[e._v("\n      Endpoint\n\n      "),r("div",{staticClass:"d-flex align-items-center mb-2"},[r("el-input",{attrs:{placeholder:"key"},model:{value:e.apiBaseUrl,callback:function(t){e.apiBaseUrl=t},expression:"apiBaseUrl"}}),r("el-input",{model:{value:e.apiSuffix,callback:function(t){e.apiSuffix=t},expression:"apiSuffix"}})],1),e._v("\n\n      Params\n      "),e._l(e.params,(function(t,n){return r("div",{key:n,staticClass:"d-flex align-items-center mb-1"},[r("el-checkbox",{staticClass:"mr-2",model:{value:t.isEnabled,callback:function(r){e.$set(t,"isEnabled",r)},expression:"parameter.isEnabled"}}),r("el-input",{attrs:{placeholder:"key"},on:{input:function(t){e.handleParamKeyChange(n)}},model:{value:t.key,callback:function(r){e.$set(t,"key",r)},expression:"parameter.key"}}),r("el-input",{staticClass:"ml-1",attrs:{placeholder:"value"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"parameter.value"}}),e.params.length>1?r("el-button",{attrs:{icon:"el-icon-close",circle:"",type:"text"},on:{click:function(t){e.removeParam(n)}}}):e._e()],1)}))],2),r("span",{staticClass:"mx-auto"}),r("div",{staticClass:"d-flex align-items-center"},[r("el-dropdown",{staticClass:"mr-4",attrs:{multiple:"","hide-on-click":!1}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n          Select columns\n          "),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{staticStyle:{"max-height":"300px",overflow:"auto"},attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-checkbox-group",{on:{input:e.update},model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}},e._l(e.allPossibleColumns,(function(t){return r("el-dropdown-item",{key:t,attrs:{label:t,value:t}},[r("el-checkbox",{staticClass:"mb-0 mr-4",attrs:{label:t,disabled:1===e.selectedColumns.length&&e.selectedColumns[0]===t}})],1)})))],1)],1),r("el-checkbox",{staticClass:"mb-0 mr-4",model:{value:e.isFiltersVisible,callback:function(t){e.isFiltersVisible=t},expression:"isFiltersVisible"}},[e._v("\n        Show Filters\n      ")]),r("el-pagination",{attrs:{"page-size":e.pageSize,total:e.count,"page-sizes":e.pageSizes,"current-page":e.page,layout:"sizes, prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"current-change":function(t){e.update()},"size-change":function(t){e.pageSize=t,e.update()}}})],1)]),r("el-button",{staticClass:"btn btn-primary mb-3",on:{click:e.update}},[e._v("\n    Search\n  ")]),r("el-table",{attrs:{data:e.tableRows,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"sort-change":e.handleSortChange}},e._l(e.selectedColumns,(function(t){return r("el-table-column",{key:t,attrs:{label:t,prop:t,align:"center",sortable:!0},scopedSlots:e._u([{key:"default",fn:function(n){return[r("div",{staticClass:"text-left"},[0===n.$index&&e.isFiltersVisible?r("div",[r("el-input",{attrs:{placeholder:"Search by "+t,type:"number"===e.getFieldType(t)?"number":"text"},on:{change:function(t){e.update()}},model:{value:e.searchFilters[t],callback:function(r){e.$set(e.searchFilters,t,r)},expression:"searchFilters[name]"}}),r("el-checkbox",{staticClass:"mt-3",attrs:{disabled:"number"===e.getFieldType(t)},on:{change:function(t){e.update()}},model:{value:e.exactSearches[t],callback:function(r){e.$set(e.exactSearches,t,r)},expression:"exactSearches[name]"}},[e._v("\n              Exact match\n            ")])],1):e._e(),r("span",[e._v(e._s(e.getPath(n.row,t)))])])]}}])})}))),e.data.length?r("div",{staticClass:"d-flex align-items-center my-3"},[r("button",{staticClass:"btn btn-secondary download-button mr-2",on:{click:function(t){e.downloadCSV()}}},[e._v("\n      Download\n    ")]),r("button",{staticClass:"btn btn-secondary download-button",on:{click:function(t){e.downloadAllCSV()}}},[e._v("\n      Download All\n    ")]),r("span",{staticClass:"mx-auto"}),r("el-pagination",{attrs:{"page-size":e.pageSize,total:e.count,"page-sizes":e.pageSizes,"current-page":e.page,layout:"sizes, prev, pager, next"},on:{"update:currentPage":function(t){e.page=t},"current-change":function(t){e.update()},"size-change":function(t){e.pageSize=t,e.update()}}})],1):e._e()],1)}),[],!1,null,null,null).exports}}]);